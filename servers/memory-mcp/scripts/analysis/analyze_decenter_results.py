#!/usr/bin/env python3
"""
–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —É–ª—É—á—à–µ–Ω–∏–π —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —á–∞—Ç–∞ DeCenter
"""

import sys

sys.path.append("src")

from memory_mcp.cli.main import _tokenize as old_tokenize
from memory_mcp.utils.russian_tokenizer import tokenize_text


def analyze_decenter_results():
    """–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –ø–æ —á–∞—Ç—É DeCenter"""

    print("=" * 80)
    print("üìä –°–†–ê–í–ù–ò–¢–ï–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó: –ß–ê–¢ DeCenter")
    print("=" * 80)
    print()

    # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Ç–∞ DeCenter
    decenter_results = {
        "Bitcoin –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã": {
            "results_count": 2,
            "top_score": 35.0,
            "filtered_out": 13,
            "top_result": "–ì—É–±–µ—Ä–Ω–∞—Ç–æ—Ä –ö–æ–Ω–Ω–µ–∫—Ç–∏–∫—É—Ç–∞ –ø–æ–¥–ø–∏—Å–∞–ª –∑–∞–∫–æ–Ω, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–º —É—á—Ä–µ–∂–¥–µ–Ω–∏—è–º –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Bitcoin",
        },
        "–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –±–ª–æ–∫—á–µ–π–Ω": {
            "results_count": 3,
            "top_score": 35.0,
            "filtered_out": 10,
            "top_result": "–í–ª–∞—Å—Ç–∏ –û–ê–≠ –æ–ø—Ä–æ–≤–µ—Ä–≥–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç–µ–π–∫–µ—Ä–∞–º TON –ø–æ–ª—É—á–∞—Ç—å –∑–æ–ª–æ—Ç—É—é –≤–∏–∑—É",
        },
        "–º–∞–π–Ω–∏–Ω–≥ —Ñ–µ—Ä–º–∞": {
            "results_count": 1,
            "top_score": 35.0,
            "filtered_out": 14,
            "top_result": "–í –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑ –≤—ã—à–ª–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ PPKAS ‚Äî –ø–µ—Ä–≤–∞—è P2E-–∏–≥—Ä–∞ –Ω–∞ –±–∞–∑–µ –±–ª–æ–∫—á–µ–π–Ω–∞ Kaspa",
        },
        "—Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏–ø—Ç—ã": {
            "results_count": 3,
            "top_score": 35.0,
            "filtered_out": 12,
            "top_result": "–î–æ–Ω–∞–ª—å–¥ –¢—Ä–∞–º–ø –∑–∞—è–≤–∏–ª, —á—Ç–æ –æ–Ω –±–æ–ª—å—à–æ–π –ø–æ–∫–ª–æ–Ω–Ω–∏–∫ –∫—Ä–∏–ø—Ç—ã",
        },
        "Tether USDT": {
            "results_count": 3,
            "top_score": 35.0,
            "filtered_out": 10,
            "top_result": "Tether –≤—ã–ø—É—Å—Ç–∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π 1 –º–∏–ª–ª–∏–∞—Ä–¥ USDT",
        },
        "–ò–ª–æ–Ω –ú–∞—Å–∫": {
            "results_count": 0,  # –ë—É–¥–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
            "top_score": 0,
            "filtered_out": 0,
            "top_result": "N/A",
        },
    }

    print("üîç –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê –ü–û –ß–ê–¢–£ DeCenter:")
    print("-" * 60)

    total_results = 0
    total_filtered = 0
    total_score = 0
    successful_queries = 0

    for query, data in decenter_results.items():
        if data["results_count"] > 0:
            print(f'\nüìù –ó–∞–ø—Ä–æ—Å: "{query}"')
            print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: {data['results_count']}")
            print(f"   –¢–æ–ø score: {data['top_score']}")
            print(f"   –û—Ç—Å–µ—á–µ–Ω–æ: {data['filtered_out']}")
            print(f"   –¢–æ–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {data['top_result'][:80]}...")

            total_results += data["results_count"]
            total_filtered += data["filtered_out"]
            total_score += data["top_score"]
            successful_queries += 1

    print("\nüìä –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:")
    print(f"   –£—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤: {successful_queries}")
    print(f"   –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: {total_results}")
    print(f"   –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å–µ—á–µ–Ω–Ω—ã—Ö: {total_filtered}")
    print(f"   –°—Ä–µ–¥–Ω–∏–π —Ç–æ–ø score: {total_score/successful_queries:.1f}")
    print(
        f"   –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç—Å–µ—á–µ–Ω–∏—è: {(total_filtered/(total_results+total_filtered)*100):.1f}%"
    )

    print("\n" + "=" * 80)
    print("üß† –ê–ù–ê–õ–ò–ó –¢–û–ö–ï–ù–ò–ó–ê–¶–ò–ò –î–õ–Ø –ö–†–ò–ü–¢–û–í–ê–õ–Æ–¢–ù–û–ì–û –ö–û–ù–¢–ï–ù–¢–ê")
    print("=" * 80)

    # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—é –Ω–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ
    crypto_texts = [
        "Bitcoin –¥–æ—Å—Ç–∏–≥ –Ω–æ–≤–æ–≥–æ –º–∞–∫—Å–∏–º—É–º–∞ $120,000",
        "Tether –Ω–∞–ø–µ—á–∞—Ç–∞–ª–∏ 2 –º–∏–ª–ª–∏–∞—Ä–¥–∞ USDT",
        "–º–∞–π–Ω–∏–Ω–≥ —Ñ–µ—Ä–º—ã –≤ –†–æ—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç",
        "—Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö",
        "–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –±–ª–æ–∫—á–µ–π–Ω —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
    ]

    print("üìö –¢–û–ö–ï–ù–ò–ó–ê–¶–ò–Ø –ö–†–ò–ü–¢–û–í–ê–õ–Æ–¢–ù–û–ì–û –ö–û–ù–¢–ï–ù–¢–ê:")
    print("-" * 50)

    for text in crypto_texts:
        print(f'\n–¢–µ–∫—Å—Ç: "{text}"')

        old_tokens = old_tokenize(text)
        new_tokens = tokenize_text(text)

        print(f"–°—Ç–∞—Ä–∞—è: {old_tokens}")
        print(f"–ù–æ–≤–∞—è:  {new_tokens}")

        if old_tokens != new_tokens:
            print("‚ú® –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã")
        else:
            print("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã")

    print("\n" + "=" * 80)
    print("üéØ –°–†–ê–í–ù–ï–ù–ò–ï –° –ß–ê–¢–û–ú TON CIS Hub")
    print("=" * 80)

    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ TON CIS Hub
    ton_cis_results = {
        "TON –±–ª–æ–∫—á–µ–π–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞": {"results": 3, "filtered": 12},
        "–≤–æ—Ä–∫—à–æ–ø —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞": {"results": 3, "filtered": 0},
        "–∑–∞–¥–∞—á–∞ –ø—Ä–æ–µ–∫—Ç": {"results": 1, "filtered": 3},
        "–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã Bitcoin": {"results": 3, "filtered": 11},
    }

    print("üìä –°–†–ê–í–ù–ï–ù–ò–ï –ú–ï–¢–†–ò–ö:")
    print("-" * 40)

    # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è TON CIS Hub
    ton_total_results = sum(r["results"] for r in ton_cis_results.values())
    ton_total_filtered = sum(r["filtered"] for r in ton_cis_results.values())

    print("TON CIS Hub:")
    print(f"  –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: {ton_total_results}")
    print(f"  –û—Ç—Å–µ—á–µ–Ω–æ: {ton_total_filtered}")
    print(
        f"  –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç—Å–µ—á–µ–Ω–∏—è: {(ton_total_filtered/(ton_total_results+ton_total_filtered)*100):.1f}%"
    )

    print("\nDeCenter:")
    print(f"  –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: {total_results}")
    print(f"  –û—Ç—Å–µ—á–µ–Ω–æ: {total_filtered}")
    print(
        f"  –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç—Å–µ—á–µ–Ω–∏—è: {(total_filtered/(total_results+total_filtered)*100):.1f}%"
    )

    # –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–ª–∏—á–∏–π
    print("\nüìà –ê–ù–ê–õ–ò–ó –†–ê–ó–õ–ò–ß–ò–ô:")
    print(f"  –†–∞–∑–Ω–∏—Ü–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö: {total_results - ton_total_results:+d}")
    print(f"  –†–∞–∑–Ω–∏—Ü–∞ –≤ –æ—Ç—Å–µ—á–µ–Ω–∏–∏: {total_filtered - ton_total_filtered:+d}")

    print("\n" + "=" * 80)
    print("üîç –°–ü–ï–¶–ò–§–ò–ö–ê –ß–ê–¢–ê DeCenter")
    print("=" * 80)

    print("‚úÖ –û–°–û–ë–ï–ù–ù–û–°–¢–ò –ö–û–ù–¢–ï–ù–¢–ê:")
    print("  - –í—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–æ–π —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏")
    print("  - –ú–Ω–æ–≥–æ –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ (Bitcoin, USDT, DeFi)")
    print("  - –°–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Ä—É—Å—Å–∫–∏–π + –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)")
    print("  - –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞")
    print("  - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è")

    print("\n‚úÖ –ö–ê–ß–ï–°–¢–í–û –ü–û–ò–°–ö–ê:")
    print("  - –í—ã—Å–æ–∫–∏–µ scores —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (35.0)")
    print("  - –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º")
    print("  - –•–æ—Ä–æ—à–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞")
    print("  - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–º–∏ —Ç–µ—Ä–º–∏–Ω–∞–º–∏")

    print("\n‚úÖ –£–õ–£–ß–®–ï–ù–ò–Ø –¢–û–ö–ï–ù–ò–ó–ê–¶–ò–ò:")
    print("  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞")
    print("  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–æ–ø-—Å–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç")
    print("  - –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞")
    print("  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å")

    print("\n" + "=" * 80)
    print("üìä –í–´–í–û–î–´ –ü–û –ß–ê–¢–£ DeCenter")
    print("=" * 80)

    print("üéØ –ö–õ–Æ–ß–ï–í–´–ï –ù–ê–•–û–î–ö–ò:")
    print("  1. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º")
    print("  2. –°–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Ä—É—Å—Å–∫–∏–π + –∞–Ω–≥–ª–∏–π—Å–∫–∏–π) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
    print("  3. –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞")
    print("  4. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞")
    print("  5. –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Ä–º–∏–Ω–∞–º–∏")

    print("\nüöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:")
    print("  1. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–º–∏ —á–∞—Ç–∞–º–∏")
    print("  2. –£–ª—É—á—à–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã")
    print("  3. –ú–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–ª–æ–≤–∞—Ä—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤")
    print("  4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –¥–ª—è –∫—Ä–∏–ø—Ç–æ—Ç–µ—Ä–º–∏–Ω–æ–≤")

    print("\nüéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:")
    print("–£–ª—É—á—à–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç")
    print("—Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —á–∞—Ç–∞ DeCenter!")
    print("–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞ –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É! üöÄ")


if __name__ == "__main__":
    analyze_decenter_results()
