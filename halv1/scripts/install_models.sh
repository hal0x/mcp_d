#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π Ollama

echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π Ollama..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω
if ! curl -s http://localhost:11434/api/tags > /dev/null; then
    echo "‚ùå Ollama –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Ollama –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É."
    exit 1
fi

echo "‚úÖ Ollama –¥–æ—Å—Ç—É–ø–µ–Ω"

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
echo "üì• –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º mxbai-embed-large:latest –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤..."
ollama pull mxbai-embed-large:latest

if [ $? -eq 0 ]; then
    echo "‚úÖ mxbai-embed-large:latest —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
else
    echo "‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ mxbai-embed-large:latest"
    exit 1
fi

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é LLM –º–æ–¥–µ–ª—å
echo "üì• –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º gemma3n:e4b-it-q8_0 –¥–ª—è —á–∞—Ç–∞..."
ollama pull gemma3n:e4b-it-q8_0

if [ $? -eq 0 ]; then
    echo "‚úÖ gemma3n:e4b-it-q8_0 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
else
    echo "‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ gemma3n:e4b-it-q8_0"
    exit 1
fi

echo ""
echo "üéâ –í—Å–µ –º–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!"
echo ""
echo "–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏:"
echo "  - mxbai-embed-large:latest (—ç–º–±–µ–¥–¥–∏–Ω–≥–∏, 1024 –∏–∑–º–µ—Ä–µ–Ω–∏—è)"
echo "  - gemma3n:e4b-it-q8_0 (—á–∞—Ç, 32k –∫–æ–Ω—Ç–µ–∫—Å—Ç, –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å)"
echo ""
echo "–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:"
echo "  source venv/bin/activate"
echo "  python main.py"
