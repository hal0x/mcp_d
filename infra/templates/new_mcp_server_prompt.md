# Промпт для агента: создание MCP‑сервера по стандартам

Ты — инженер, который генерирует новый MCP‑сервер в этом монорепозитории. Делай минимально необходимое, строго следуя конвенциям в `templates/GUIDELINES.md`.

Твоя задача: сгенерировать готовый к запуску MCP‑сервер по предметной области, используя шаблон архитектуры ниже.

Выполни шаги:

1) Согласуй вводные
- Уточни: цель сервера, домен (API/SDK/CLI/БД), список первых инструментов (3–7), транспорт (stdio/HTTP), требования к секретам.
- Определи имя пакета (`snake_case`) и человекочитаемое название.

2) Создай каркас проекта
- Папка: `./<name>`
- Файлы: `pyproject.toml`, `README.md`, `src/<package>/server.py`, `src/<package>/tools/*.py`, `src/<package>/services/*.py`, `src/<package>/config.py`.
- Экспонируй entrypoint: `[project.scripts] <name> = "<package>.server:main"`.

3) Реализуй минимум один рабочий инструмент
- Используй Pydantic‑модели для входных параметров и, при необходимости, ответа.
- Инкапсулируй интеграции в `services/` (без MCP‑зависимостей), чтобы упрощать тестирование.
- Обрабатывай ошибки (валидационные — `ValueError`, остальные — дружелюбные сообщения и лог).

4) Добавь сервисные инструменты
- `health` — быстрый самотест (например, проверка доступа к API).
- `version` — версия пакета и конфигурация режима (без секретов).

5) Документация и примеры
- В `README.md` добавь: установку, переменные окружения, запуск (stdio и при необходимости HTTP), примеры вызова инструментов с payload/ответом, сниппет конфигурации для Claude Desktop.

6) Быстрый самопроверки‑чеклист
- Инструменты названы в `snake_case`. Входные — Pydantic. Логи не содержат секретов.
- `uv run mcp dev src/<package>/server.py` запускается без ошибок.
- В `--print-config` видно актуальные значения.

Требования к коду
- По умолчанию используй `mcp.server.fastmcp.FastMCP`.
- Структурируй инструменты по файлам/домейнам в `tools/`.
- Модуль `config.py` на Pydantic Settings, с `from_env` и опциональной загрузкой `.env`.
- Логирование: имя инструмента, параметры (sanitized), длительность, результат/ошибка.
- Возвращай структурированные JSON‑ответы, пригодные для дальнейшей обработки.

Бонус (опционально)
- Поддержка `transport="streamable-http"` через флаги `--host/--port`.
- Ресурсы (`@mcp.resource`) для статических справочников или кэшируемых данных.

Вывод агента
- Созданные файлы с краткими выдержками содержимого.
- Инструкции по запуску и короткая проверка работоспособности.

Опираться на примеры в репо
- Простые FastMCP‑сценарии: `shell-mcp`, `tradingview-mcp`.
- Низкоуровневая реализация MCP stdio и богатая схема инструментов: `binance-mcp`.

*** Конец промпта. Выполняй строго по списку и конвенциям. ***
